# training
torchrun --nproc_per_node=1 --master_port=29501 run_pretraining_multimae_chloe.py \
  --in_domains modis-s2 --out_domains modis-s2 \
  --modis_txt /scratch/bepk/bkim2/MultiMAE_RGB/MultiMAE/valid_list/delta/triplet_MODIS_paths.txt\
  --s2_txt  /scratch/bepk/bkim2/MultiMAE_RGB/MultiMAE/valid_list/delta/triplet_S2_paths.txt \
  --batch_size 16 --epochs 100 \
  --warmup_epochs 0 --warmup_steps 0 \
  --output_dir /scratch/bepk/bkim2/MultiMAE/result/modis-s1-s2/4 \
  --num_workers 8
  --log_wandb \
  --wandb_project MultiMAE-RGB \
  --wandb_entity goeulkim \
  --wandb_run_name multimae-modis-s2



  # with config file
  torchrun --nproc_per_node=1 --master_port=29501 run_pretraining_multimae_chloe.py   --config /scratch/bepk/bkim2/MultiMAE/cfgs/pretrain/multimae-chloe.yaml   --num_workers 24 --pin_mem



# inference
torchrun run_inference_chloe.py \
  --resume /scratch/bepk/bkim2/MultiMAE/result/modis-s1-s2/4/checkpoint-98.pth \
  --in_domains s1-s2 \
  --out_domains modis \
  --modis_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/triplet_MODIS_paths.txt \
  --s1_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/triplet_S1_paths.txt \
  --s2_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/triplet_S2_paths.txt \
  --save_dir ./inference_result \
  --patch_size 4


torchrun run_inference_chloe.py \
  --resume /scratch/bepk/bkim2/MultiMAE/result/modis-s1-s2/2/checkpoint-99.pth \
  --in_domains s1-s2 \
  --out_domains modis \
  --modis_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/valid_MODIS.txt \
  --s1_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/valid_S1.txt \
  --s2_txt /scratch/bepk/bkim2/MultiMAE/valid_list/delta/valid_S2.txt \
  --save_dir ./inference_result \
  --patch_size 4
